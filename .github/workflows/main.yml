   name: Build and Push Docker Image

   on:
     push:
       branches:
         - main

   jobs:
     build-and-push:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3

         - name: Build Java
           run: |
             mvn clean package

         - name: Build Docker image
           run: |
             docker build -t claudiobianco/java-product:latest .

         - name: Login to Docker Hub
           run: |
             echo "${DOCKER_PASSWORD}" | docker login -u "${DOCKER_USERNAME}" --password-stdin

         - name: Push Docker image to Docker Hub
           run: |
             docker push claudiobianco/java-product:latest
